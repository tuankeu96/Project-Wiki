module.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=5)}([function(t,e){t.exports=flarum.core.compat.app},function(t,e){t.exports=flarum.core.compat.extend},function(t,e){t.exports=flarum.core.compat["components/TextEditor"]},function(t,e){t.exports=flarum.core.compat["components/Modal"]},,function(t,e,r){"use strict";r.r(e);var n=r(1),a=r(0),o=r.n(a),i=r(2),s=r.n(i);var l=r(3),u="",d=0;function p(t,e){var r;r=""===u?"https://api.giphy.com/v1/gifs/trending?api_key="+e+"&limit=40&offset="+d.toString(10):"https://api.giphy.com/v1/gifs/search?api_key="+e+"&q="+u+"&limit=40&offset="+d.toString(10),fetch(r).then((function(t){return t.json()})).then((function(e){if(void 0!==e.data){for(var r=document.getElementById("LeftResults"),n=document.getElementById("RightResults"),a=0,o=function(){var o=document.createElement("img"),s=document.createElement("img");return document.getElementsByClassName("temp-text")[0].textContent="",document.getElementById("LoadMore").style.visibility="hidden",document.getElementById("LoadMoreSpan").textContent=app.translator.trans("therealsujitk.forum.gifs.loadmore"),void 0===e.data[0]?(document.getElementsByClassName("temp-text")[0].textContent=app.translator.trans("therealsujitk.forum.gifs.noresults"),++a,"break"):void 0===e.data[i]?(++a,"break"):(o.src=e.data[i].images.downsized.url,o.alt=e.data[i].title,o.style="min-width: 97.5%; width: 97.5%; border-radius: 5px; margin: 1.25%; margin-left: 0%; margin-right: 0.3125%; vertical-align: top; cursor: pointer;",r.insertAdjacentElement("beforeend",o),o.onclick=function(){var e="![Giphy - "+o.alt+"]("+o.src+")";app.modal.close(),t.insertAtCursor(e)},void 0===e.data[i+1]?(++a,"break"):(s.src=e.data[i+1].images.downsized.url,s.alt=e.data[i+1].title,s.style="min-width: 97.5%; width: 97.5%; border-radius: 5px; margin: 1.25%; margin-left: 0.3125%; margin-right: 0%; vertical-align: top; cursor: pointer;",n.insertAdjacentElement("beforeend",s),void(s.onclick=function(){var e="![Giphy - "+s.alt+"]("+s.src+")";app.modal.close(),t.insertAtCursor(e)})))},i=0;i<parseInt("40");i+=2){if("break"===o())break}0===a&&(document.getElementById("LoadMore").style.visibility="visible")}else console.error("Sorry, there was something wrong with the GIFs API Key.")}))}var c=function(t){var e,r;function n(){return t.apply(this,arguments)||this}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var a=n.prototype;return a.className=function(){return"SearchGIFModal"},a.title=function(){return app.translator.trans("therealsujitk.forum.gifs.title")},a.content=function(){var t=this;return m(".Modal-body",{oncreate:function(){document.getElementsByClassName("temp-text")[0].textContent=app.translator.trans("therealsujitk.forum.gifs.loading");var e=t.attrs.textArea,r=app.forum.attribute("therealsujitk-gifs.giphy_api_key");u=document.getElementById("GIFSearchBar").value.trim(),p(e,r)}},m("span[style = position: absolute; left: 50%; top: 200px; transform: translate(-50%, -50%);]",{id:"flarum-loading",class:"temp-text"}),m("div",[m("table[style = vertical-align: top; width: 100%;]",[m("td[style = width: 100%;]",[m("form[style = margin-right: 1.25%;]",{class:"Search-input",onsubmit:function(){return!1},onkeyup:function(e){if(13===e.keyCode){d=0,document.getElementById("LeftResults").innerHTML="",document.getElementById("RightResults").innerHTML="",document.getElementById("LeftResults").scrollTop=0,document.getElementsByClassName("temp-text")[0].textContent=app.translator.trans("therealsujitk.forum.gifs.loading"),document.getElementById("LoadMore").style.visibility="hidden";var r=t.attrs.textArea,n=app.forum.attribute("therealsujitk-gifs.giphy_api_key");u=document.getElementById("GIFSearchBar").value.trim(),p(r,n)}}},[m("input[style = width: 100%;]",{id:"GIFSearchBar",class:"FormControl",type:"search",autocomplete:"off",placeholder:app.translator.trans("therealsujitk.forum.gifs.searchbar")})])]),m("td",[m("button[style = margin-left: 1.25%;]",{class:"Button Button--primary hasIcon",itemclassname:"App-primaryControl",type:"button",title:app.translator.trans("therealsujitk.forum.gifs.search"),onclick:function(){d=0,document.getElementById("LeftResults").innerHTML="",document.getElementById("RightResults").innerHTML="",document.getElementById("LeftResults").scrollTop=0,document.getElementsByClassName("temp-text")[0].textContent=app.translator.trans("therealsujitk.forum.gifs.loading"),document.getElementById("LoadMore").style.visibility="hidden";var e=t.attrs.textArea,r=app.forum.attribute("therealsujitk-gifs.giphy_api_key");u=document.getElementById("GIFSearchBar").value.trim(),p(e,r)}},[m("span",{class:"Button-label"},app.translator.trans("therealsujitk.forum.gifs.search"))])])])]),m("div[style = margin-top: 10px; margin-bottom: 10px; min-height: 45vh; height: 45vh; overflow: auto;]",[m("table",{width:"100%"},[m("td",{id:"LeftResults",width:"50%"}),m("td",{id:"RightResults",width:"50%"})]),m("button[style = position: relative; left: 50%; transform: translate(-50%, 0%); margin-top: 10px; visibility: hidden;]",{id:"LoadMore",class:"Button",type:"button",title:app.translator.trans("therealsujitk.forum.gifs.loadmore"),onclick:function(){d+=parseInt("40"),document.getElementById("LoadMoreSpan").textContent=app.translator.trans("therealsujitk.forum.gifs.loading"),p(t.attrs.textArea,app.forum.attribute("therealsujitk-gifs.giphy_api_key"))}},[m("span",{id:"LoadMoreSpan",class:"Button-label"},app.translator.trans("therealsujitk.forum.gifs.loadmore"))])]),m("div[style = padding-top: 10px; padding-bottom: 30px;]",[m("img[style = float: right;]",{src:app.forum.attribute("baseUrl")+"/assets/extensions/therealsujitk-gifs/powered_by_giphy.svg"})]))},n}(r.n(l).a);o.a.initializers.add("therealsujitk/flarum-ext-gifs",(function(){Object(n.extend)(s.a.prototype,"toolbarItems",(function(t){var e=this;t.add("therealsujitk-gifs",m("button",{type:"buton",class:"Button Button--icon Button--link hasIcon",title:o.a.translator.trans("therealsujitk.forum.gifs.label"),onclick:function(){return o.a.modal.show(c,{textArea:e.attrs.composer.editor})}},[m("svg",{class:"fas fa-this-icon-does-not-exist",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",width:"16pt",height:"7pt",viewBox:"0 0 16 7",version:"1.1"},[m("g",{id:"surface1"},[m("path[fill = currentColor]",{d:"M 0.78125 7.042969 C 0.496094 6.933594 0.265625 6.738281 0.132812 6.480469 L 0 6.234375 L 0 0.875 L 0.132812 0.625 C 0.277344 0.355469 0.558594 0.128906 0.847656 0.0429688 C 0.957031 0.015625 1.71875 0 2.917969 0.0078125 L 4.808594 0.0234375 L 5.050781 0.15625 C 5.21875 0.246094 5.332031 0.355469 5.425781 0.511719 C 5.597656 0.800781 5.648438 0.992188 5.648438 1.410156 L 5.648438 1.753906 L 1.65625 1.753906 L 1.65625 5.355469 L 3.96875 5.355469 L 3.96875 3.554688 L 5.648438 3.554688 L 5.648438 4.800781 C 5.648438 5.484375 5.628906 6.117188 5.605469 6.207031 C 5.523438 6.527344 5.308594 6.808594 5.050781 6.953125 L 4.808594 7.085938 L 2.878906 7.09375 C 1.339844 7.105469 0.917969 7.09375 0.78125 7.042969 Z M 0.78125 7.042969 "}),m("path[fill = currentColor]",{d:"M 7.371094 3.554688 L 7.371094 0 L 9.050781 0 L 9.050781 7.109375 L 7.371094 7.109375 Z M 7.371094 3.554688 "}),m("path[fill = currentColor]",{d:"M 10.773438 3.554688 L 10.773438 0 L 15.855469 0 L 15.855469 1.753906 L 12.453125 1.753906 L 12.453125 2.988281 L 14.722656 2.988281 L 14.722656 4.742188 L 12.453125 4.742188 L 12.453125 7.109375 L 10.773438 7.109375 Z M 10.773438 3.554688 "})])]),m("span",{class:"Button-label"},o.a.translator.trans("therealsujitk.forum.gifs.label"))]),10)}))}))}]);
//# sourceMappingURL=forum.js.map